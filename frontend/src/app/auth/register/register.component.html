<app-navbar></app-navbar>

<section class="neo-page neo-page--full auth-page">
  <div class="neo-wrapper neo-wrapper--narrow auth-wrapper">
    <article class="neo-card neo-card--accent auth-card">
      <header class="neo-card__header">
        <span class="neo-card__eyebrow">Sumate a la experiencia</span>
        <h1 class="neo-card__title">Crear cuenta</h1>
        <p class="neo-card__subtitle">
          Organizá tus eventos, comprá tickets y guardá tus preferencias en un solo lugar.
        </p>
      </header>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="neo-form auth-form">
        <label class="neo-field">
          <span>Nombre completo</span>
          <div class="neo-field__control">
            <fa-icon [icon]="faUserShield" class="neo-field__icon"></fa-icon>
            <input id="name" type="text" formControlName="name" placeholder="Tu nombre" />
          </div>
          <small *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
            El nombre es obligatorio y debe tener al menos 3 caracteres.
          </small>
        </label>

        <label class="neo-field">
          <span>Correo electrónico</span>
          <div class="neo-field__control">
            <fa-icon [icon]="faEnvelope" class="neo-field__icon"></fa-icon>
            <input id="email" type="email" formControlName="email" placeholder="correo@ejemplo.com" />
          </div>
          <small *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            Debe ser un correo válido.
          </small>
        </label>

        <label class="neo-field">
          <span>Contraseña</span>
          <div class="neo-field__control">
            <fa-icon [icon]="faLock" class="neo-field__icon"></fa-icon>
            <input id="password" type="password" formControlName="password" placeholder="Mínimo 8 caracteres" />
          </div>
          <small *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            La contraseña debe tener al menos 8 caracteres.
          </small>
        </label>

        <label class="neo-field">
          <span>Confirmar contraseña</span>
          <div class="neo-field__control">
            <fa-icon [icon]="faCheckDouble" class="neo-field__icon"></fa-icon>
            <input
              id="password_confirmation"
              type="password"
              formControlName="password_confirmation"
              placeholder="Repetí tu contraseña"
            />
          </div>
          <small *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('password_confirmation')?.touched">
            Las contraseñas no coinciden.
          </small>
        </label>

        <div *ngIf="errorMessage" class="neo-feedback neo-feedback--error">
          <fa-icon [icon]="faExclamationCircle"></fa-icon>
          {{ errorMessage }}
        </div>

        <button type="submit" class="neo-button neo-button--primary" [disabled]="registerForm.invalid">
          Crear cuenta
          <fa-icon [icon]="faCheckCircle"></fa-icon>
        </button>

        <p class="neo-text--muted auth-helper">
          ¿Ya tenés cuenta?
          <a routerLink="/login" class="neo-link">Iniciá sesión</a>
        </p>
      </form>
    </article>
  </div>
</section>

<app-footer></app-footer>
