<app-navbar></app-navbar>

<section class="neo-page neo-page--with-nav home-page">
  <div class="neo-wrapper">
    <div class="neo-hero home-hero">
      <span class="neo-card__eyebrow">Descubrí experiencias en vivo</span>
      <h1 class="neo-hero__title">Eventos destacados</h1>
      <p class="neo-hero__subtitle">
        Explorá la agenda actualizada y encontrá tu próximo show, conferencia o actividad favorita.
      </p>
    </div>

    <div class="home-controls">
      <div class="neo-select" [class.neo-select--open]="open">
        <button class="neo-select__button" type="button" (click)="open = !open">
          <span>{{ selected.label || 'Todos los eventos' }}</span>
          <fa-icon [icon]="faChevronDown"></fa-icon>
        </button>
        <ul *ngIf="open" class="neo-select__list">
          <li *ngFor="let opt of options" (click)="select(opt)" class="neo-select__option">
            {{ opt.label }}
          </li>
        </ul>
      </div>

      <button type="button" class="neo-button neo-button--ghost home-reset" (click)="resetFilters()">
        <fa-icon [icon]="faRetweet"></fa-icon>
        Limpiar filtros
      </button>
    </div>

    <div class="neo-grid home-grid" [class.home-grid--hidden]="!animated">
      <article class="neo-card home-card" *ngFor="let event of paginatedEvents">
        <div class="home-card__media" *ngIf="event.image_path; else placeholder">
          <img [src]="event.image_path" [alt]="event.title" />
        </div>
        <ng-template #placeholder>
          <div class="home-card__media home-card__media--placeholder">
            <span>{{ event.title.charAt(0) }}</span>
          </div>
        </ng-template>

        <div class="home-card__body">
          <h2 class="home-card__title">{{ event.title }}</h2>
          <p class="home-card__description" *ngIf="event.description">
            {{ event.description }}
          </p>

          <div class="home-card__meta">
            <span>
              <fa-icon [icon]="faCalendar"></fa-icon>
              {{ event.starts_at | date: 'dd/MM/yyyy HH:mm' }}
            </span>
            <span>
              <fa-icon [icon]="faTicket"></fa-icon>
              {{ event.capacity }} lugares
            </span>
          </div>

          <a class="home-card__cta" [routerLink]="['/event', event.id]">
            Ver evento
            <fa-icon [icon]="faArrowRight"></fa-icon>
          </a>
        </div>
      </article>
    </div>

    <div class="home-empty" *ngIf="filteredEvents.length === 0">
      <div class="neo-feedback neo-feedback--info">
        No encontramos eventos para los filtros seleccionados. Probá cambiarlos para ver más opciones.
      </div>
    </div>

    <div class="home-pagination" *ngIf="filteredEvents.length > pageSize">
      <button type="button" class="neo-button neo-button--ghost" (click)="prevPage()" [disabled]="currentPage === 1">
        Anterior
      </button>
      <span class="neo-text--muted">Página {{ currentPage }} de {{ totalPages() }}</span>
      <button
        type="button"
        class="neo-button neo-button--ghost"
        (click)="nextPage()"
        [disabled]="currentPage * pageSize >= filteredEvents.length"
      >
        Siguiente
      </button>
    </div>
  </div>
</section>

<app-footer></app-footer>
