<div *ngIf="event" class="max-w-2xl mx-auto bg-white shadow-lg rounded-2xl p-6 mt-6">

  <img *ngIf="!editMode" [src]="event.image_path" [alt]="event.title"
       class="w-full h-64 object-cover mb-4 rounded-lg" />
  <img *ngIf="editMode && imagePreview" [src]="imagePreview" class="w-full h-64 object-cover mb-4 rounded-lg" />

  <div *ngIf="!editMode">
    <h2 class="text-2xl font-bold mb-2">{{ event.title }}</h2>
    <p class="text-gray-600 mb-4">{{ event.description }}</p>
    <div class="flex flex-col gap-1 text-sm text-gray-700">
      <span><strong>Fecha:</strong> {{ event.starts_at | date:'fullDate' }}</span>
      <span><strong>Capacidad:</strong> {{ event.capacity }}</span>
      <span><strong>Precio:</strong> ${{ event.price }}</span>
    </div>
    <div *ngIf="canEdit()" class="flex gap-2 mt-4">
      <button (click)="toggleEdit()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
        Editar
      </button>
      <button (click)="deleteEvent()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
        Cancelar Evento
      </button>
    </div>
  </div>

  <form *ngIf="editMode" (ngSubmit)="saveEdit($event)" class="flex flex-col gap-3">
    <label>Título</label>
    <input [(ngModel)]="formData.title" name="title" class="border p-2 rounded" required />

    <label>Descripción</label>
    <textarea [(ngModel)]="formData.description" name="description" class="border p-2 rounded" rows="3"></textarea>

    <label>Fecha y Hora</label>
    <input type="datetime-local" [(ngModel)]="formData.starts_at" name="starts_at" class="border p-2 rounded" required />

    <label>Capacidad</label>
    <input type="number" [(ngModel)]="formData.capacity" name="capacity" class="border p-2 rounded" required />

    <label>Precio</label>
    <input type="number" [(ngModel)]="formData.price" name="price" class="border p-2 rounded" required />

    <label>Imagen</label>
    <input type="file" (change)="onFileChange($event)" />

    <div class="flex gap-2 mt-2">
      <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Guardar</button>
      <button type="button" (click)="toggleEdit()" class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500">Cancelar</button>
    </div>
  </form>

  <button routerLink="/home" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Volver</button>
</div>
