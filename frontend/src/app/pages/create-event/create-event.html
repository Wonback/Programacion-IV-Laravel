<app-navbar></app-navbar>

<section class="neo-page neo-page--with-nav create-event-page">
  <div class="neo-wrapper neo-wrapper--medium">
    <article class="neo-card neo-card--accent">
      <header class="neo-card__header">
        <span class="neo-card__eyebrow">Organizá tu próximo encuentro</span>
        <h1 class="neo-card__title">Crear nuevo evento</h1>
        <p class="neo-card__subtitle">
          Completá la información clave para publicar un evento atractivo. Podrás editarlo en cualquier momento.
        </p>
      </header>

      <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="neo-form create-event-form">
        <div class="neo-form__grid">
          <label class="neo-field neo-field--full">
            <span>Título del evento</span>
            <div class="neo-field__control">
              <input formControlName="title" placeholder="Ej. Concierto sinfónico en vivo" />
            </div>
          </label>

          <label class="neo-field neo-field--full">
            <span>Descripción</span>
            <div class="neo-field__control">
              <textarea rows="4" formControlName="description" placeholder="Contá en qué consiste tu evento"></textarea>
            </div>
          </label>

          <div class="neo-field neo-field--full create-event-categories">
            <span>Categoría</span>
            <div class="create-event-categories__grid">
              <label
                class="create-event-category"
                *ngFor="let category of categories"
                [class.create-event-category--active]="eventForm.get('category')?.value === category.value"
                [style.--accent]="category.accent"
                [style.--accent-soft]="category.accentSoft"
              >
                <input type="radio" formControlName="category" [value]="category.value" />
                <div class="create-event-category__content">
                  <strong>{{ category.label }}</strong>
                  <p>{{ category.description }}</p>
                </div>
              </label>
            </div>
            <div class="create-event-categories__error" *ngIf="eventForm.get('category')?.invalid && eventForm.get('category')?.touched">
              Seleccioná una categoría para que los asistentes puedan encontrar tu evento.
            </div>
          </div>

          <label class="neo-field">
            <span>Fecha y hora</span>
            <div class="neo-field__control">
              <fa-icon [icon]="faCalendar" class="neo-field__icon"></fa-icon>
              <input type="datetime-local" formControlName="starts_at" />
            </div>
          </label>

          <label class="neo-field">
            <span>Capacidad</span>
            <div class="neo-field__control">
              <fa-icon [icon]="faUsers" class="neo-field__icon"></fa-icon>
              <input type="number" formControlName="capacity" min="0" />
            </div>
          </label>

          <label class="neo-field">
            <span>Precio</span>
            <div class="neo-field__control">
              <fa-icon [icon]="faMoneyBillWave" class="neo-field__icon"></fa-icon>
              <input type="number" formControlName="price" min="0" placeholder="0" />
            </div>
          </label>

          <div class="neo-field">
            <span>Imagen destacada</span>
            <label class="neo-upload create-event-upload">
              <input type="file" accept="image/*" (change)="onFileChange($event)" />
              <fa-icon [icon]="faImage"></fa-icon>
              Subir imagen
            </label>
            <small>Formatos JPG o PNG. Tamaño recomendado 1200x600px.</small>
          </div>
        </div>

        <div class="create-event-preview" *ngIf="imagePreview">
          <img [src]="imagePreview" alt="Vista previa" />
        </div>

        <div *ngIf="errorMessage" class="neo-feedback neo-feedback--error">
          {{ errorMessage }}
        </div>

        <button type="submit" class="neo-button neo-button--primary" [disabled]="uploading || eventForm.invalid">
          <ng-container *ngIf="uploading; else buttonLabel">
            <span class="neo-loader"></span>
            Guardando...
          </ng-container>
          <ng-template #buttonLabel>Publicar evento</ng-template>
        </button>
      </form>
    </article>
  </div>
</section>

<app-footer></app-footer>
